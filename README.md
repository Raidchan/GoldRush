# GoldRush

マイクラの金採掘サーバーのコア。

## Overview

<概要>
初心者から玄人まで幅広く楽しめる、金採掘とトレードのやりこみサーバー。
経済サーバーって難しそうで取っつきにくいから、直感的なゲームにして親しみやすくしたい。
舞台はウエスタンなゴールドラッシュの小さな町。メサの地形に囲まれてて、金採掘用の洞窟がある。

<ワールド設定>
昼夜サイクルは少し遅めにする。
Mapは固定で地形変化は一切無し。採掘もブロックの置き換えだけ。
アドベンチャーモード固定で破壊はできない。もちろん設置も不可。
ピースフルで食事不要にするか迷う。食料を買わせるようにすればインフレ対策の一つにもなるけど、いちいち食べるのめんどい気がする。

<遊び方>
プレイヤーの基本的な動きは、ツルハシで採掘->土砂を回収->パンニングして砂金にする->精製して金塊にする->売って稼ぐ。
洞窟で掘って、オアシスとか井戸まで移動してパンニング、かまどに移動して精製、取引所で売買、みたいに、プレイヤーに手間を与えて達成感を上げる。
基本的には金のアイテムに重さの表記はあるけど、含有率が明記されないから、売った時のレートとの比較で予測するか、鑑定で見てもらうしかない。
金を精製したとき、GUIのリザルトから回収せずに次を溶かせば、金同士をくっつけて一つの塊にできる。
重さに応じで金塊の見た目が変わるから、ちまちま大きくしていくだけでもある程度楽しめると思う。
金塊にするまでの手間が面倒な人は、土砂とか砂金の状態で買い取ってくれるNPCに割安で売る。

<純金判定フラグ>
金とか装飾品を鑑定所に持ち込むと、有料で純金かどうか（金の含有率が95%を超えているか）を調べてくれる。
純金の場合はアイテムにフラグがついて、正規取引での価値が上がる。
精製を繰り返すことで少しずつ金の純度を上げられる。
繰り返し鑑定したり、精製がほんの少し手間だけど、たぶんみんな純金になるまでやる気がする。
あと純金判定を受けたやつとか、闇商人から買った没収対象のアイテムも、精製で混ぜちゃえば全部フラグが剝がれてただの金塊扱いになる。

<装飾品の加工>
装飾品としての買取依頼があれば、精製した金をさらに加工することで、同じ重さの金塊よりちょっと高く売却できる。
加工可能な装飾品のレパートリーは信用度ランクによって解放されるようにするか検討中。多分その方がいいんだろうな。
純度が一定値に満たない場合は取引できない。

<取引の信用度>
できれば、取引回数とか重量に応じて、信用ランクをつけたい。
取引所ごとのランクにするか全体での信用ランクにするかまだ決めてない。
信用ランクが初期値より低いと、正規取引所での価格が下がる。
信用ランクが上がると装飾品依頼とかを受けれるようになる感じ。
ただ一方的に上がるばっかりだと全員高ランクでインフレしそうだから要検討。

<闇取引>
外につながるトンネル前のNPCに話しかけると、「盗賊には注意しろよ」っていわれて、町の外の馬車の中にテレポートする。
帰りは同じ馬車のNPCに話しかければテレポートで戻る。これならいずれ別エリアの拡張も出来そう。
町の外に闇商人が集まる小規模のキャンプがあるから、そこに金を持って行って、売ることもできる。
逆に闇商人から、金塊とか装飾品の購入もできる。これはまちなかでは没収対象の違法アイテム扱い。
これを街に持ち込んで、精製で溶かしちゃえば証拠隠滅できる。
あとは廃屋地下室の闇取引所があるから、そこの違法取引専門のNPCに売る。
正規の装飾品の買取依頼で偽物として売っちゃうことも可能。
取引完了メッセージで「なんか形が歪だな..」みたいな不信感を演出。
偽物の装飾品の場合、純度に満たないと「これは偽物だ！取引は無効だ！」みたいになって、そのアイテムは没収される。
信用度ランクを実装するならここでも影響を出すべきな気がする。
没収対象の装飾品で買取依頼を達成すれば、自力で金塊から作るより低コスト。
闇商人から買ったものは、金の含有率がかなり低かったり、没収対象だから、ギャンブル要素もかなり強めで危ない感じにしたい。

<盗賊>
闇商人エリアに売りに行くだけなら、明確なデメリットが存在しないから、盗賊NPCを配置したい。
理想としては、常に盗賊を巡回させて、馬車の中、テントの中にいないと、遭遇したときに捕まって身ぐるみ剝がされるようにしたいと思ってる。
所持金と持ってる金を奪われて町に戻される。
闇商人との取引は、盗賊の動きを見ながら安全地帯をこそこそ移動する感じにしたい。

<警備兵>
まちなかには警備兵NPCを何人か配置する。
昼間は多くて、夜は少人数になる。
常に歩き回ってるやつと、ほとんど動かないで張り込みしてるやつを作る。
路地裏とかは闇取引メインのプレイヤーの溜まり場になってほしいから、警備兵は通常は行かないようにしようと思ってる。
警備兵は没収対象のアイテムを持ってるプレイヤーが近くにいると、走って追跡する。追いつかれて確保されると、没収対象のアイテムは全部消える丸ごと損。
あと捕まると信用ランクが下がる。

<プラグインの最終目標>
各売買所によって価格が全然違うし、稼ぎ方も無数にあって、ハイリスクハイリターンなゴールドラッシュの経済世界を作りたいと思ってる。

<補足>
NPCの行動は外部プラグインで100%制御する予定で、コマンドだけGoldRushプラグインのを埋め込みで、全部完結できるようにしたい。
・各取引所、移動用のNPC用コマンド
・巡回NPCが追跡、確保で対象プレイヤーに実行するコマンド
・盗賊NPCが追跡、確保で対象プレイヤーに実行するコマンド

## Requirements

- **Minecraft**: 1.21.10
- **Server**: Spigot/Paper
- **Java**: 1.8+
- **Dependencies**: None (Spigot API and standard library only)

## Technical Specifications

- **Language**: Java 8
- **API Version**: 1.21
- **Package Structure**:
  - `net.raiid.goldrush` - Main logic, economic system
  - `net.raiid.customblock` - Custom block system
  - `net.raiid.util` - Utility classes

## License

All rights reserved.
